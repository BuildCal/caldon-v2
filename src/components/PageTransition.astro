---
// Page transition overlay
---

<div class="page-transition" id="page-transition">
  <div class="transition-overlay"></div>
</div>

<style>
  .page-transition {
    position: fixed;
    inset: 0;
    z-index: 10001;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.4s var(--ease-out);
  }
  
  .page-transition.active {
    opacity: 1;
    pointer-events: all;
  }
  
  .transition-overlay {
    position: absolute;
    inset: 0;
    background-color: var(--color-primary);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.6s var(--ease-in-out);
  }
  
  .page-transition.active .transition-overlay {
    transform: scaleX(1);
    transform-origin: right;
  }
</style>

<script>
  const transition = document.getElementById('page-transition');
  
  // Trigger transition on internal link clicks (only for same-origin navigation)
  document.querySelectorAll('a[href^="/"]').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      const currentPath = window.location.pathname;
      
      // Only trigger transition if navigating to a different page
      if (href && !href.startsWith('#') && !link.hasAttribute('target') && href !== currentPath) {
        e.preventDefault();
        
        if (transition) {
          transition.classList.add('active');
          
          setTimeout(() => {
            window.location.href = href;
          }, 300);
        } else {
          window.location.href = href;
        }
      }
    });
  });
  
  // Fade out on page load
  window.addEventListener('load', () => {
    if (transition) {
      transition.classList.remove('active');
    }
  });
</script>

